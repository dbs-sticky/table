<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic HTML Page</title>
    <style>

        @font-face {
                    font-family: 'FireSans';
                    src: url('/FiraSans-light.woff2') format('woff2');
                    font-weight: 300;
                    font-style: normal;
                    font-display: swap;
                }

        table {
            border-collapse: collapse;
            width: 100%;
            max-width: 900px;
            margin: auto;
            font-family: 'FireSans', sans-serif;
            
        }

        th, td {
            border: 1px solid #ebebeb;
            padding: 0.25em;
            text-align: left;
        }

        .old-style {
            font-variant-numeric: oldstyle-nums;
            font-feature-settings: "onum" 1;
        }

        .lining-style {
            font-variant-numeric: lining-nums;
            font-feature-settings: "lnum" 1;
        }

        .proportional-style {
            font-variant-numeric: proportional-nums;
         }

        .tabular-style {
            font-variant-numeric: tabular-nums;
        }


        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        td:first-child, th:first-child {
            text-align: left;
        }
        tfoot {
            font-weight: bold;
            background-color: #f2f2f2;
        }

        span {
            box-shadow: -1px 0px 0px 0px red, 1px 0px 0px 0px red;
        }
    </style>
    <script>
        function toggleAlignment() {
            const checkbox = document.getElementById('alignmentToggle');
            const numberCells = document.querySelectorAll('td:not(:first-child), th:not(:first-child)');
            
            if (checkbox.checked) {
                // Right align number columns
                numberCells.forEach(cell => {
                    cell.style.textAlign = 'right';
                });
            } else {
                // Reset to default alignment
                numberCells.forEach(cell => {
                    cell.style.textAlign = 'left';
                });
            }
        }

        // Store original values
        const originalValues = {};
        
        function toggleDecimalPlaces() {
            const checkbox = document.getElementById('decimalToggle');
            const cellSpans = document.querySelectorAll('td:not(:first-child) > span');
            
            // First time running - store original values
            if (Object.keys(originalValues).length === 0) {
                cellSpans.forEach((span, index) => {
                    originalValues[index] = span.textContent;
                });
            }
            
            if (checkbox.checked) {
                // Standardize to 2 decimal places
                cellSpans.forEach((span, index) => {
                    const text = span.textContent;
                    // Skip any cells with text content
                    if (!/^[\d,.]+$/.test(text.trim())) return;
                    
                    // Remove any commas for processing
                    let value = text.replace(/,/g, '');
                    
                    if (!value.includes('.')) {
                        // Add .00 to integers
                        span.textContent = text.includes(',') ? 
                            text.replace(/(\d+)$/, '$1.00') : 
                            value + '.00';
                    } else if (/\.\d$/.test(value)) {
                        // Add trailing zero to single decimal place
                        span.textContent = text.replace(/(\.\d)/, '$10');
                    }
                });
            } else {
                // Restore original values
                cellSpans.forEach((span, index) => {
                    span.textContent = originalValues[index];
                });
            }
        }

        //Toggle old style and lining style numerals
        function toggleNumeralStyle() {
            const checkbox = document.getElementById('numeralStyleToggle');
            const cells = document.querySelectorAll('td, th');
            
            if (checkbox.checked) {
                // Use lining numerals
                cells.forEach(cell => {
                    if (cell.classList.contains('old-style')) {
                        cell.classList.remove('old-style');
                    }
                    cell.classList.add('lining-style');

                });
            } else {
                // Use oldstyle numerals
                cells.forEach(cell => {
                    if (cell.classList.contains('lining-style')) {
                        cell.classList.remove('lining-style');                    
                    }
                    cell.classList.add('old-style');
                });
            }
        }

        // Toggle proportional and tabular numerals
        function toggleNumerals() {
            const checkbox = document.getElementById('numeralsToggle');
            const cells = document.querySelectorAll('td, th');
            
            if (checkbox.checked) {
                // Use tabular numerals
                cells.forEach(cell => {
                    if (cell.classList.contains('proportional-style')) {
                        cell.classList.remove('proportional-style');
                    }
                    cell.classList.add('tabular-style');
                });
            } else {
                // Use proportional numerals
                cells.forEach(cell => {
                    if (cell.classList.contains('tabular-style')) {
                        cell.classList.remove('tabular-style');
                    }
                    cell.classList.add('proportional-style');
                });
            }
        }
        
        function toggleGuides() {
            const checkbox = document.getElementById('guidesToggle');
            const spans = document.querySelectorAll('td > span');
            
            if (checkbox.checked) {
                // Enable red guide lines
                spans.forEach(span => {
                    span.style.boxShadow = '-1px 0px 0px 0px red, 1px 0px 0px 0px red';
                });
            } else {
                // Disable red guide lines
                spans.forEach(span => {
                    span.style.boxShadow = 'none';
                });
            }
        }

    </script>
</head>
<body>
    <h1>Welcome to My Page</h1>
    <p>This is a basic HTML page.</p>

    <div style="margin-bottom: 10px;">
        <label for="alignmentToggle">
            <input type="checkbox" id="alignmentToggle" onchange="toggleAlignment()">
            Right-align number columns
        </label>
    </div>

    <div style="margin-bottom: 10px;">
        <label for="decimalToggle">
            <input type="checkbox" id="decimalToggle" onchange="toggleDecimalPlaces()">
            Standardize to 2 decimal places
        </label>
    </div>

    <div style="margin-bottom: 10px;">
        <label for="numeralStyleToggle">
            <input type="checkbox" id="numeralStyleToggle" onchange="toggleNumeralStyle()" >
            Use lining numerals (instead of oldstyle)
        </label>
    </div>

   
    <div style="margin-bottom: 10px;">
        <label for="numeralsToggle">
            <input type="checkbox" id="numeralsToggle" onchange="toggleNumerals()">
            Use tabular numerals (fixed-width digits)
        </label>
    </div>
 
    <div style="margin-bottom: 10px;">
        <label for="guidesToggle">
            <input type="checkbox" id="guidesToggle" onchange="toggleGuides()" checked>
            Show alignment guides
        </label>
    </div>

    
    <table>
        <thead>
            <tr>
                <th class="old-style proportional-style">Category</th>
                <th class="old-style proportional-style">Small</th>
                <th class="old-style proportional-style">Medium</th>
                <th class="old-style proportional-style">Large</th>
                <th class="old-style proportional-style">X-Large</th>
                <th class="old-style proportional-style">XX-Large</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="old-style proportional-style">Product A</td>
                <td class="old-style proportional-style"><span>12.45</span></td>
                <td class="old-style proportional-style"><span>1,245</span></td>
                <td class="old-style proportional-style"><span>28,756.2</span></td>
                <td class="old-style proportional-style"><span>385,942</span></td>
                <td class="old-style proportional-style"><span>106,587,652.89</span></td>
            </tr>
            <tr>
                <td class="old-style proportional-style">Product B</td>
                <td class="old-style proportional-style"><span>52.99</span></td>
                <td class="old-style proportional-style"><span>2,382.54</span></td>
                <td class="old-style proportional-style"><span>35,928</span></td>
                <td class="old-style proportional-style"><span>472,851.39</span></td>
                <td class="old-style proportional-style"><span>534,999,900.7</span></td>
            </tr>
            <tr>
                <td class="old-style proportional-style">Product C</td>
                <td class="old-style proportional-style"><span>86.32</span></td>
                <td class="old-style proportional-style"><span>3,654</span></td>
                <td class="old-style proportional-style"><span>46,213.7</span></td>
                <td class="old-style proportional-style"><span>988,773.45</span></td>
                <td class="old-style proportional-style"><span>956,143,111</span></td>
            </tr>
            <tr>
                <td class="old-style proportional-style">Product D</td>
                <td class="old-style proportional-style"><span>93.8</span></td>
                <td class="old-style proportional-style"><span>4,987.29</span></td>
                <td class="old-style proportional-style"><span>59,426</span></td>
                <td class="old-style proportional-style"><span>7,111,491</span></td>
                <td class="old-style proportional-style"><span>111,765,161.1</span></td>
            </tr>
            <tr>
                <td class="old-style proportional-style">Product E</td>
                <td class="old-style proportional-style"><span>111</span></td>
                <td class="old-style proportional-style"><span>642,621,461.56</span></td>
                <td class="old-style proportional-style"><span>956,143,111</span></td>
                <td class="old-style proportional-style"><span>111,765,161.1</span></td>
                <td class="old-style proportional-style"><span>748,730,723</span></td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td class="old-style proportional-style">Total</td>
                <td class="old-style proportional-style"><span>358.02</span></td>
                <td class="old-style proportional-style"><span>19,524.83</span></td>
                <td class="old-style proportional-style"><span>266,648.5</span></td>
                <td class="old-style proportional-style"><span>2,968,948.1</span></td>
                <td class="old-style proportional-style"><span>642,621,461.46</span></td>
            </tr>
        </tfoot>
    </table>
</body>
</html>